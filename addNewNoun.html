<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Store darija word</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <a href="index.html"><i class="fa fa-arrow-left"></i> ÙŽ</a>
  

  <h1>Store darija noun in the Database</h1>

  <form id="dataForm">
    
   
    <label for="word">Enter the word (Darija):</label>
    <input type="text" id="word" name="word" required >
    <br>
    <label for="translation">Enter the translation (English):</label>
    <input type="text" id="translation" name="translation" required>
    <br>
    <label for="type">Enter the type (e.g., verb, adj , noun):</label>
    <input type="text" id="type" name="type" required>
    <br>
    <label for="phonetic">phonetic (optional):</label>
    <input type="text" id="phonetic" name="phonetic" value="-">
    <br>
    <label for="example">Enter an example (optional):</label>
    <input type="text" id="example" name="example" value="-">
    <br>
    <label for="details">Enter details (optional):</label>
    <input type="text" id="details" name="details" value="-">
    <br>
    <label for="gender">Gender of the noun :</label>
    <input type="text" id="gender" name="Gender" value="-" required>
    <br>
    <label for="singular">singular of the noun :</label>
    <input type="text" id="singular" name="singular" value="-" required>
    <br>
    <label for="plural">plural of the noun :</label>
    <input type="text" id="plural" name="plural" value="-" required>
    <br>
    <h3>prounouns/dyal</h3>
    <h4>singular</h4>
    
    <div id="pronouns">
<label for="my">dyali/my</label>
<input type="text" id="my" name="my" value="-"><br>

<label for="your-sm">dyalek/your-m</label>
<input type="text" id="your-sm" name="your-sm" value="-"><br>

<label for="your-sf">dyaleki/your-f</label>
<input type="text" id="your-sf" name="your-sf" value="-"><br>

<label for="his">dyalo/his</label>
<input type="text" id="his" name="his" value="-"><br>

<label for="her">dyala/her</label>
<input type="text" id="her" name="her" value="-"><br>

<label for="our">dyalna/our</label>
<input type="text" id="our" name="our" value="-"><br>

<label for="your-pm">dyalkom/your-p</label>
<input type="text" id="your-pm" name="your-pm" value="-"><br>

<label for="their">dyalhom/their</label>
<input type="text" id="their" name="their" value="-"><br>



    </div>

    <h4>plural</h4>
    <div id="plural-pronouns">
      <label for="plural-my">dyali/my</label>
      <input type="text" id="plural-my" name="plural-my" value="-"><br>
  
      <label for="plural-your-sm">dyalek/your-m</label>
      <input type="text" id="plural-your-sm" name="plural-your-sm" value="-"><br>
  
      <label for="plural-your-sf">dyaleki/your-f</label>
      <input type="text" id="plural-your-sf" name="plural-your-sf" value="-"><br>
  
      <label for="plural-his">dyalo/his</label>
      <input type="text" id="plural-his" name="plural-his" value="-"><br>
  
      <label for="plural-her">dyala/her</label>
      <input type="text" id="plural-her" name="plural-her" value="-"><br>
  
      <label for="plural-our">dyalna/our</label>
      <input type="text" id="plural-our" name="plural-our" value="-"><br>
  
      <label for="plural-your-pm">dyalkom/your-p</label>
      <input type="text" id="plural-your-pm" name="plural-your-pm" value="-"><br>
  
      <label for="plural-their">dyalhom/their</label>
      <input type="text" id="plural-their" name="plural-their" value="-"><br>
  </div>

    <button type="submit">Submit</button>
  </form>

  <script>
    
 var isLogin = localStorage.getItem('isLogin');
 if(isLogin !== 'true'){
     window.location.href = `login.html`;
 }

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBOGC8qinBmX_F4msMrrxV3VgbwYt6mtg8",
      authDomain: "darija2024-database.firebaseapp.com",
      databaseURL: "https://darija2024-database-default-rtdb.firebaseio.com",
      projectId: "darija2024-database",
      storageBucket: "darija2024-database.appspot.com",
      messagingSenderId: "621215461163",
      appId: "1:621215461163:web:d594741683e99c742fdf6e",
      measurementId: "G-VYFCV3GLZN"
    };
  

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    // Reference to the Realtime Database
    const database = firebase.database();

    const params = new URLSearchParams(window.location.search);

// Extract values from the parameters
const wordValue = params.get('word');
const translationValue = params.get('translation');
const typeValue = params.get('type');
const phoneticValue = params.get('phonetic');
const exampleValue = params.get('example');
const detailsValue = params.get('details');
const genderValue = params.get('gender');
const singularValue = params.get('singular');
const pluralValue = params.get('plural');

// Set the values of the form inputs based on URL parameters
document.getElementById("word").value = wordValue || "";
document.getElementById("translation").value = translationValue || "";
document.getElementById("type").value = typeValue || "";
document.getElementById("phonetic").value = phoneticValue || "-";
document.getElementById("example").value = exampleValue || "-";
document.getElementById("details").value = detailsValue || "-";
document.getElementById("gender").value = genderValue || "-";
document.getElementById("singular").value = singularValue || "-";
document.getElementById("plural").value = pluralValue || "-";

updateNounPronouns(wordValue);
updatePluralNounPronouns(pluralValue);

    // Handle form submission
    document.getElementById('dataForm').addEventListener('submit', function(event) {
      event.preventDefault(); // Prevent form from submitting normally

      var word = document.getElementById('word').value.toLowerCase().replace(/\s+/g, '');
      console.log(word);

      var translation = document.getElementById('translation').value.toLowerCase().replace(/\s+/g, '');
      console.log(translation);

      var type = document.getElementById('type').value.toLowerCase().replace(/\s+/g, '');
      console.log(type);

      var phonetic = document.getElementById('phonetic').value.toLowerCase().replace(/\s+/g, '');
      var example = document.getElementById('example').value;
      var details = document.getElementById('details').value;
      var gendre = document.getElementById('gender').value.toLowerCase().replace(/\s+/g, '');
      var plural = document.getElementById('plural').value.toLowerCase().replace(/\s+/g, '');
      var singular = document.getElementById('singular').value.toLowerCase().replace(/\s+/g, '');


      var word_id = `${word[0]}-${type}-${word}-${translation}`;
      
var myValue = document.getElementById('my').value;
var yourSmValue = document.getElementById('your-sm').value;
var yourSfValue = document.getElementById('your-sf').value;
var hisValue = document.getElementById('his').value;
var herValue = document.getElementById('her').value;
var ourValue = document.getElementById('our').value;
var yourPmValue = document.getElementById('your-pm').value;
var theirValue = document.getElementById('their').value;


      // Push the data to Firebase Realtime Database
      database.ref(`darija-words/${word_id}`).set({
        "word": word,
    "translation": translation,
    "type" : type,
    "phonetic": phonetic,
    "example": example,
    "details": details,
    "gender" : gendre,
    "singular" : singular,
    "plural" : plural , 
    "prounouns" : {
      "my": myValue,
      "your-sm": yourSmValue,
      "your-sf": yourSfValue,
      "his": hisValue,
      "her": herValue,
      "our": ourValue,
      "your-pm": yourPmValue,
      "their": theirValue
    },
    "prounouns-plural":{
      "my": document.getElementById('plural-my').value,
      "your-sm": document.getElementById('plural-your-sm').value,
      "your-sf": document.getElementById('plural-your-sf').value,
      "his": document.getElementById('plural-his').value,
      "her": document.getElementById('plural-her').value,
      "our": document.getElementById('plural-our').value,
      "your-pm": document.getElementById('plural-your-pm').value,
      "their": document.getElementById('plural-their').value
    }


      }).then(function() {
        
       
        window.location.href = `noun.html?id=${word_id}`;



      }).catch(function(error) {
        console.error('Error storing data:', error);
      });

      // Clear the form
      document.getElementById('dataForm').reset();
    });
  

   
document.getElementById('word').addEventListener('change', function(event){
 var noun = event.target.value

 updateNounPronouns(noun)  ;

})


document.getElementById('plural').addEventListener('change', function(event){
  var noun = event.target.value

updatePluralNounPronouns(noun)  ;
})


function updateNounPronouns(noun) {
    document.getElementById("my").value = noun + 'y';         // dyali/my
    document.getElementById("your-sm").value = noun + 'ek';    // dyalek/your-m
    document.getElementById("your-sf").value = noun + 'eki';   // dyaleki/your-f
    document.getElementById("his").value = noun + 'o';         // dyalo/his
    document.getElementById("her").value = noun + 'ha';         // dyala/her
    document.getElementById("our").value = noun + 'na';        // dyalna/our
    document.getElementById("your-pm").value = noun + 'kom';   // dyalkom/your-p
    document.getElementById("their").value = noun + 'hom';     // dyalhom/their
}



function updatePluralNounPronouns(noun) {
    document.getElementById("plural-my").value = noun + 'y';         
    document.getElementById("plural-your-sm").value = noun + 'ek';   
    document.getElementById("plural-your-sf").value = noun + 'eki';  
    document.getElementById("plural-his").value = noun + 'o';       
    document.getElementById("plural-her").value = noun + 'ha';       
    document.getElementById("plural-our").value = noun + 'na';       
    document.getElementById("plural-your-pm").value = noun + 'kom';  
    document.getElementById("plural-their").value = noun + 'hom';    
}


  </script>

  <style>
    #pronouns , #plural-pronouns{
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
    }
  </style>
</body>
</html>
